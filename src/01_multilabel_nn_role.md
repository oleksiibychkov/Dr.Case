[← Повернутися на головну](../)

---

## 1. SOM + Multilabel Neural Network як ієрархічна модель клінічного мислення

### 1.1. Проблема прямого діагностування і необхідність ієрархії

У класичних підходах до автоматизованої медичної діагностики часто робиться спроба побудувати **єдину модель**, яка на основі симптомів одразу видає діагноз або список діагнозів із певними ймовірностями. Формально це виглядає привабливо: є вхідний вектор симптомів, є модель, є вихід у вигляді ймовірностей діагнозів. Проте такий підхід має фундаментальний недолік, який добре відомий у клінічній практиці: **одні й ті самі симптоми можуть належати до принципово різних клінічних сценаріїв**.

Наприклад, біль у грудях, задишка і тривога можуть бути проявами:

* серцево-судинної патології,
* легеневої патології,
* психосоматичного розладу,
* гострого інфекційного процесу.

З точки зору лікаря, ці сценарії **не є просто різними діагнозами одного рівня**. Вони належать до різних *рівнів інтерпретації клінічної картини*. Лікар спочатку визначає, *у якому напрямку він думає*, і лише потім порівнює конкретні діагнози всередині цього напрямку. Саме ця багаторівнева логіка і відсутня у "плоских" моделях.

Тому перша ключова ідея системи полягає в тому, що **клінічне мислення має ієрархічну структуру**, і цю структуру необхідно відобразити в архітектурі моделі.

---

### 1.2. Рівень SOM як рівень клінічних сценаріїв

Self-Organizing Map у цій системі виконує роль **першого, грубого рівня інтерпретації**, який відповідає не за діагнози, а за **типові клінічні патерни**.

Ключовий момент полягає в тому, що SOM:

* не навчається на правильних діагнозах;
* не оптимізується на точність класифікації;
* не намагається "вгадати істину".

Замість цього вона виконує **структурування простору симптомів**. Кожен нейрон SOM представляє собою узагальнений симптомний патерн, який можна інтерпретувати як *типову клінічну картину*. Ці картини можуть бути клінічно близькими (наприклад, легеневі стани) або навіть клінічно різними, але подібними за первинними проявами.

Таким чином, результат роботи SOM — це **не відповідь**, а **контекст**. Він відповідає на питання:

> "До яких типових сценаріїв можна віднести цей випадок?"

І це питання завжди передує питанню "який діагноз?".

---

### 1.3. Чому SOM не може і не повинна ставити діагноз

Принципово важливо підкреслити, що SOM **не призначена для остаточного діагностування**, і будь-яка спроба змусити її це робити призведе до концептуальної помилки.

По-перше, SOM є моделлю без учителя і не має у своїй оптимізаційній цілі жодного поняття "правильного" або "неправильного" діагнозу. По-друге, навіть якщо до кожного нейрона "прикріпити" діагнози, це прикріплення має **описовий**, а не **прогностичний** характер: воно лише говорить, *які діагнози часто зустрічалися в межах цього патерну*.

У клінічному сенсі це повністю відповідає реальності: на етапі первинного огляду лікар може сказати, що випадок "схожий на легеневий" або "схожий на серцевий", але він ще не має достатніх підстав для точного вибору конкретної нозології.

---

### 1.4. Рівень Multilabel NN як рівень диференціальної діагностики

Multilabel Neural Network з'являється **на наступному рівні ієрархії**, коли клінічний сценарій уже приблизно окреслений, але всередині нього залишається невизначеність.

На цьому етапі змінюється сама постановка задачі. Якщо SOM працює з питанням "до чого це схоже?", то Multilabel NN працює з питанням:

> "Наскільки кожен із можливих діагнозів узгоджується з поточним станом пацієнта?"

Це принципово інше питання. Воно не про класифікацію, а про **оцінку узгодженості гіпотез** з наявними даними.

Саме тому використовується multilabel-постановка:

* діагнози не взаємовиключні;
* кілька гіпотез можуть одночасно залишатися правдоподібними;
* система не змушена робити передчасний вибір.

---

### 1.5. Чому Multilabel NN є підлеглою SOM, а не навпаки

В ієрархічній архітектурі SOM і Multilabel NN не є симетричними компонентами.

SOM виконує роль **контекстного обмежувача**:

* вона визначає, *які діагнози взагалі мають сенс* у даному випадку;
* вона формує допустимий підпростір гіпотез.

Multilabel NN, у свою чергу, **не має права виходити за межі цього підпростору**. Вона не повинна робити висновки про діагнози, які не узгоджуються з клінічним сценарієм, визначеним SOM.

Це відповідає реальній лікарській логіці: лікар не порівнює, наприклад, ортопедичні та психіатричні діагнози, якщо випадок явно не належить до відповідного контексту.

Таким чином, Multilabel NN працює **умовно**:

> "оцінка діагнозу *за умови*, що ми перебуваємо в цьому клінічному сценарії".

---

### 1.6. Ієрархія як спосіб керування невизначеністю

Одна з головних переваг ієрархічної моделі полягає в тому, що вона дозволяє **розділити різні типи невизначеності**:

* SOM працює з **грубою, структурною невизначеністю**: "який напрямок?"
* Multilabel NN працює з **тонкою, діагностичною невизначеністю**: "який саме діагноз?"

Це принципово важливо для медицини, оскільки ці два типи невизначеності мають різну природу і потребують різних стратегій зняття:

* структурна невизначеність знімається через загальні симптоми;
* діагностична — через специфічні питання та аналізи.

Ієрархічна модель дозволяє системі **не змішувати ці рівні** і діяти послідовно, так само як це робить досвідчений лікар.

---

### 1.7. Підсумок розділу 1

Отже, SOM і Multilabel NN утворюють **ієрархічну модель клінічного мислення**, де:

* SOM задає простір можливих клінічних сценаріїв;
* Multilabel NN виконує диференціальну діагностику всередині цього простору;
* жоден рівень не намагається виконувати функцію іншого.

Саме така ієрархія робить систему:

* концептуально коректною з точки зору медицини;
* інтерпретованою;
* придатною для ітеративного уточнення діагнозу, як у реальній клінічній практиці.

---

## 2. Що означає "Multilabel NN працює після SOM" — буквально

### 2.1. Момент, у якому починає працювати Multilabel NN

Після завершення первинного етапу, який виконує SOM, система перебуває в стані часткового знання. Вона вже не є "сліпою": простір можливих клінічних сценаріїв суттєво звужений, і більшість явно нерелевантних напрямків відкинуті. Проте на цьому етапі система все ще не має підстав зробити остаточний висновок. Вона знає, *де саме в просторі медицини* знаходиться випадок, але не знає, *яка саме гіпотеза всередині цього простору є правильною*.

Цей стан є типовим для реальної клінічної практики. Саме в цей момент лікар перестає мислити категоріями "органна система" або "загальний синдром" і переходить до **диференціальної діагностики між конкретними нозологіями**. Він починає порівнювати діагнози між собою, ставлячи питання виду: *який із цих діагнозів краще пояснює всю сукупність спостережень?*

У запропонованій системі **саме цю роль бере на себе Multilabel Neural Network**.

---

### 2.2. Принципова відмінність Multilabel NN від SOM у цій архітектурі

На відміну від SOM, Multilabel NN є моделлю з учителем і навчається на клінічних кейсах, де відомі підтверджені діагнози. Проте важливо підкреслити, що навіть у цьому випадку її задача **не зводиться до прямого передбачення діагнозу**. Вона не відповідає на питання *"який діагноз істинний?"*. Натомість вона відповідає на значно обережніше і клінічно коректніше питання:

> *"Наскільки кожен із розглянутих діагнозів узгоджується з поточним станом пацієнта за наявною інформацією?"*

Ця відмінність є принциповою. Multilabel NN не претендує на істину, а лише **оцінює ступінь правдоподібності гіпотез**, що вже були відібрані попереднім рівнем ієрархії.

---

### 2.3. Формування входу Multilabel NN: поєднання стану пацієнта і SOM-контексту

Щоб Multilabel NN могла виконувати свою функцію коректно, вона повинна отримувати на вхід **дві принципово різні групи інформації**.

Перша група — це **поточний клінічний стан пацієнта**. До моменту запуску Multilabel NN цей стан вже не є початковим, поверхневим описом. Він включає:

* первинні скарги;
* відповіді на уточнюючі питання;
* результати доступних аналізів;
* ознаки, які були додані або виключені в ході попередніх ітерацій.

Цей стан подається у вигляді структурованого вектора ознак, який відображає **всю відому на даний момент клінічну інформацію**.

Друга група інформації — це **контекст**, сформований SOM. І тут важливо підкреслити: Multilabel NN не отримує "сиру" карту SOM і не аналізує її структуру самостійно. Замість цього їй передається **результат інтерпретації SOM**: обмежена множина найбільш релевантних сценаріїв разом із мірою їх близькості до поточного випадку.

Таким чином, у вхід Multilabel NN явно включається інформація про те:

* *які клінічні сценарії наразі вважаються можливими*;
* *наскільки кожен із них підтримується наявними симптомами*.

Це означає, що Multilabel NN працює **не в абстрактному просторі симптомів**, а в **умовному просторі**, вже структурованому SOM.

---

### 2.4. Чому SOM-контекст є необхідним для коректної роботи Multilabel NN

Без включення SOM-контексту Multilabel NN була б змушена виконувати дві задачі одночасно:

1. відновлювати загальний клінічний сценарій;
2. проводити тонку диференціацію між діагнозами.

Це не лише ускладнює навчання, але й суперечить клінічній логіці. У реальній практиці лікар **ніколи не оцінює діагноз у вакуумі**. Будь-яка оцінка завжди відбувається в контексті попередніх гіпотез: "якщо ми вже думаємо, що це легенева проблема, то давайте порівняємо легеневі діагнози".

Передаючи SOM-контекст у Multilabel NN, система фактично каже їй: *ось у якому клінічному просторі ми зараз знаходимося; не намагайся мислити ширше, ніж потрібно*.

Це робить поведінку моделі:

* стабільнішою;
* інтерпретованішою;
* ближчою до людського клінічного мислення.

---

### 2.5. Вихід Multilabel NN як стан діагностичної невизначеності

Результатом роботи Multilabel NN є не один діагноз, а **розподіл значень**, кожне з яких відповідає конкретному діагнозу з множини кандидатів. Ці значення слід інтерпретувати не як остаточні рішення, а як **поточний стан діагностичної невизначеності**.

Типовою ситуацією після першого проходу Multilabel NN є наявність кількох діагнозів із близькими значеннями. З клінічної точки зору це означає, що **наявної інформації недостатньо**, щоб віддати перевагу одній гіпотезі. І саме в цьому місці система починає поводитися так, як поводився б досвідчений лікар.

---

### 2.6. Multilabel NN як джерело повторного диференціального опитування

Коли кілька діагнозів мають подібну ступінь правдоподібності, система не намагається штучно "вибрати переможця". Замість цього вона переходить до наступного логічного кроку — **активного уточнення інформації**.

На цьому етапі Multilabel NN використовується не лише як оцінювач, але і як **індикатор конфлікту**. Вона дозволяє виявити:

* які саме діагнози конкурують між собою;
* які симптоми або ознаки є критичними для їх розрізнення.

Іншими словами, система починає шукати відповідь на питання:

> *яка додаткова інформація найбільш ефективно зменшить невизначеність?*

Це повністю відповідає логіці диференціальної діагностики: лікар не ставить випадкові питання, а шукає саме ті, які здатні змінити баланс між гіпотезами.

---

### 2.7. Ітеративний цикл: Multilabel NN як частина повторюваного процесу

Після того як система сформувала уточнююче питання або запропонувала додатковий аналіз, пацієнт або лікар надає нову інформацію. Ця інформація:

* доповнює або змінює поточний стан пацієнта;
* може посилити одні гіпотези і послабити інші.

Після цього **весь процес запускається знову**:

* оновлюється опис стану пацієнта;
* заново обчислюється SOM-контекст;
* Multilabel NN повторно оцінює діагнози.

Таким чином, Multilabel NN не є одноразовим класифікатором. Вона є **динамічним компонентом ітеративного процесу**, який може повторюватися кілька разів, так само як у реальній клінічній практиці лікар неодноразово переглядає свої гіпотези у світлі нових даних.

---

### 2.8. Критерії завершення роботи Multilabel NN

Ітеративний процес не може тривати нескінченно, тому система повинна мати чіткі критерії зупинки. Ці критерії є логічними, а не технічними.

Процес вважається завершеним, коли:

* один діагноз отримує суттєву перевагу над іншими;
* або додаткова інформація перестає змінювати розподіл правдоподібностей;
* або система визначає, що для подальшого просування потрібні інструментальні методи, які виходять за межі поточної моделі.

У кожному з цих випадків Multilabel NN не "оголошує істину", а **фіксує стан знання**, досягнутий на даний момент.

---

### 2.9. Інтерпретація результату як допомога, а не вирок

Фінальний результат роботи Multilabel NN є **структурованим описом діагностичного стану**, а не автоматичним діагнозом. Він включає:

* перелік найбільш правдоподібних діагнозів;
* ступінь впевненості для кожного з них;
* історію уточнень, які призвели до цього стану.

Це дозволяє лікарю:

* зрозуміти логіку системи;
* оцінити її аргументацію;
* прийняти остаточне клінічне рішення.

---

### 2.10. Підсумок розділу 2

Multilabel Neural Network у цій архітектурі є **механізмом тонкої диференціальної діагностики**, який:

* працює в контексті, заданому SOM;
* оцінює правдоподібність діагнозів, а не проголошує істину;
* ініціює повторні цикли уточнення;
* імітує логіку клінічного мислення досвідченого лікаря.

Саме завдяки цьому Multilabel NN стає не просто класифікатором, а **активним учасником діагностичного процесу**, що розгортається у часі і реагує на нову інформацію.


---

## 3. Критерії зупинки і формальна інтерпретація результату

### 3.1. Чому в диференціальній діагностиці взагалі потрібна зупинка

Ітеративна діагностика за своєю природою нагадує процес наукового пошуку: є набір гіпотез, є спостереження, є уточнення даних, і кожне уточнення має змінювати картину знання. У серіалі про доктора Хауса це показано особливо яскраво: команда висуває версію, перевіряє її, отримує новий факт, версія змінюється, і так кілька разів. Проте навіть у найкращого клініциста цей процес не може бути нескінченним. У реальному світі є три обмеження: обмеження часу (пацієнту може бути погано прямо зараз), обмеження ресурсу (не можна нескінченно робити аналізи й обстеження) і обмеження інформації (інколи нових фактів просто немає або їх неможливо отримати швидко). Тому будь-яка експертна система, яка імітує ітеративну диференціальну діагностику, має мати чітко сформульовані критерії зупинки.

Зупинка в цьому контексті — це не "кінець діагностики" і не "встановлення істини". Це скоріше момент, коли система каже: *за наявною інформацією ми зробили все, що могли зробити раціонально, і тепер або є достатня перевага однієї гіпотези, або потрібен інший тип даних*.

---

### 3.2. Формальний опис стану знання

У архітектурі стан знання на ітерації \\(t\\) можна формально описати кортежем:

\\[\mathcal{R}^{(t)} = \left( x^{(t)},\; m^{(t)},\; \mathcal{D}_{cand}^{(t)},\; \hat{y}^{(t)} \right)\\]

де:
- \\(x^{(t)}\\) — поточний опис пацієнта
- \\(m^{(t)}\\) — SOM-контекст (membership по юнітах)
- \\(\mathcal{D}_{cand}^{(t)}\\) — множина діагнозів-кандидатів
- \\(\hat{y}^{(t)}\\) — значення узгодженості діагнозів від Multilabel NN

Усе, що система може "знати", відображено саме тут. Тому критерії зупинки повинні бути функціями від \\(\mathcal{R}^{(t)}\\) і від того, як \\(\mathcal{R}^{(t)}\\) змінюється з ітераціями.

---

### 3.3. Критерій 1: Домінування однієї гіпотези

Найбільш інтуїтивний сценарій зупинки — коли після кількох циклів одна гіпотеза починає переконливо домінувати над іншими.

Нехай серед кандидатів \\(\mathcal{D}_{cand}^{(t)}\\) вибрано два діагнози з найбільшими значеннями:

\\[d_{(1)}^{(t)} = \arg\max_{d_i \in \mathcal{D}_{cand}^{(t)}} \hat{y}_i^{(t)}\\]

\\[d_{(2)}^{(t)} = \arg\max_{d_i \in \mathcal{D}_{cand}^{(t)} \setminus \{d_{(1)}^{(t)}\}} \hat{y}_i^{(t)}\\]

Тоді "розрив" визначимо як:

\\[\Delta^{(t)} = \hat{y}_{(1)}^{(t)} - \hat{y}_{(2)}^{(t)}\\]

**Критерій домінування:** Зупинка відбувається, коли

\\[\Delta^{(t)} \geq \delta_{gap}\\]

де \\(\delta_{gap}\\) — заданий поріг (наприклад, 0.3).

**Інтерпретація:** якщо відрив лідера великий, система має підстави вважати, що вона вже знайшла найкращу робочу гіпотезу. Зупинка за домінуванням означає: "можна перейти до наступного клінічного кроку".

---

### 3.4. Критерій 2: Інформаційне виснаження

Буває, що домінування не настає. Значення \\(\hat{y}\\) залишаються близькими, але система продовжує задавати питання. У якийсь момент це стає схожим на хаотичний перебір, який не змінює картину.

**Критерій стабілізації:**

\\[\|\hat{y}^{(t)} - \hat{y}^{(t-1)}\| \leq \varepsilon_{stab}\\]

протягом кількох послідовних ітерацій.

**Інтерпретація:** нові відповіді або дані не змінюють ранжування та не зменшують конфлікт. У такому випадку подальше опитування не є раціональним, бо система вже "вичерпала" інформаційний потенціал доступних питань. Якщо опитування не допомагає, треба змінити тип інформації.

---

### 3.5. Критерій 3: Запит зовнішнього спостереження

Система може "зупинитися" не через визначеність або виснаження, а тому що чітко бачить, що потрібно далі, але це неможливо отримати через розмову з пацієнтом.

У клінічній практиці багато діагнозів розрізняються не симптомами, а специфічними тестами. Якщо серед невідомих ознак немає таких, що дають достатній очікуваний виграш, але серед тестів він є, система повинна зупинитися в режимі "потрібен тест".

---

### 3.6. Критерій 4: Обмеження ресурсу і безпековий протокол

Є критерії, пов'язані з ресурсом і безпекою:

* досягнуто максимальну кількість ітерацій;
* вичерпано допустимий перелік питань;
* серед кандидатів є діагнози високого ризику і потрібні негайні дії.

Навіть якщо \\(\hat{y}_i\\) не найбільше, але вага ризику \\(w_i\\) дуже висока і \\(\hat{y}_i\\) не нульове, система може формувати рекомендацію "діяти обережно".

---

### 3.7. Формальне повідомлення про тип завершення

Коли система зупиняється, важливо повідомляти **тип зупинки**:

\\[\text{STOP\_TYPE}^{(t)} \in \{\text{DOMINANCE},\; \text{STABILITY},\; \text{NEED\_TEST},\; \text{SAFETY}\}\\]

Це робить поведінку системи прозорою: лікар бачить не лише список гіпотез, а й логічну причину, чому система не питає далі.

---

## 4. Інтерпретація результату

### 4.1. Фінальний результат як стан знання

**Фінальний результат у цій архітектурі не є діагнозом.**

Фінальний результат — це **стабілізований стан знання**, до якого система дійшла в межах доступної інформації та заданих критеріїв зупинки.

На момент завершення ітеративного процесу система перебуває в стані:

\\[\mathcal{R}^{(T)} = \left( x^{(T)},\; m^{(T)},\; \mathcal{D}_{cand}^{(T)},\; \hat{y}^{(T)},\; \text{STOP\_TYPE}^{(T)} \right)\\]

де \\(T\\) — номер останньої ітерації.

---

### 4.2. Компоненти фінального результату

Цей кортеж є **повним формальним описом того, що система "знає"**:

* \\(x^{(T)}\\) фіксує, на основі яких даних зроблено висновок;
* \\(m^{(T)}\\) показує, у якому сценарному контексті він інтерпретується;
* \\(\mathcal{D}_{cand}^{(T)}\\) визначає, які гіпотези взагалі залишилися;
* \\(\hat{y}^{(T)}\\) дає числову оцінку узгодженості кожної гіпотези;
* \\(\text{STOP\_TYPE}^{(T)}\\) пояснює причину завершення.

---

### 4.3. Інтерпретація значень Multilabel NN

\\(\hat{y}_i^{(T)}\\) слід інтерпретувати як **ступінь узгодженості діагнозу з поточним станом пацієнта в заданому сценарному контексті**:

\\[\hat{y}_i \approx \text{compatibility}(d_i \mid x^{(T)}, S^{(T)})\\]

Це **не ймовірність істини**, а модельна впевненість.

---

### 4.4. Ранжування як форма представлення знання

Вихід системи — не "діагноз", а **ранжований список гіпотез**, кожна з яких має числову оцінку:

* Діагноз A — висока узгодженість
* Діагноз B — помірна узгодженість  
* Діагноз C — низька узгодженість

---

### 4.5. Очікуваний інформаційний виграш (Expected Information Gain)

Для вибору наступного питання використовується:

\\[\text{EIG}(q) = H(\hat{y}^{(t)}) - \mathbb{E}_{a \sim P(a|q)}\left[H(\hat{y}^{(t+1)} | a)\right]\\]

де:
- \\(H(\hat{y}^{(t)})\\) — ентропія поточного розподілу узгодженостей
- \\(a\\) — можлива відповідь на питання \\(q\\)
- \\(P(a|q)\\) — ймовірнісний розподіл відповідей
- \\(H(\hat{y}^{(t+1)} | a)\\) — очікувана ентропія після отримання відповіді

**Ентропія для multilabel-випадку:**

\\[H(\hat{y}) = -\sum_{i=1}^{L} \left[\hat{y}_i \log \hat{y}_i + (1-\hat{y}_i) \log(1-\hat{y}_i)\right]\\]

**Вибір питання:**

\\[q^{*} = \arg\max_q \text{EIG}(q)\\]

тобто питання, яке максимально зменшує очікувану невизначеність.

---

## 5. Чому Multilabel NN природно запускає повторне опитування

### 5.1. Повторне опитування як наслідок математичної природи

Повторне опитування **випливає безпосередньо з того, як Multilabel Neural Network формулює знання і невизначеність**. Multilabel NN — це механізм, який **підтримує поточний стан гіпотез** і кількісно описує, наскільки кожна з них узгоджується з даними. Вона не має вбудованого механізму "завершеності".

---

### 5.2. Multilabel-постановка як джерело невизначеності

На відміну від multiclass-класифікації, де модель змушена обрати один клас, multilabel-модель допускає ситуацію, в якій **кілька гіпотез одночасно залишаються правдоподібними**. Вихідний вектор \\(\hat{y}\\) не є розподілом і не має внутрішнього механізму "самозаспокоєння".

**Невизначеність у Multilabel NN не є дефектом, а є тригером для продовження діагностики.**

---

### 5.3. Конфлікт гіпотез як сигнал до дії

Конфлікт виникає, коли для декількох діагнозів значення \\(\hat{y}_i\\) знаходяться в одному діапазоні. З геометричної точки зору це означає, що пацієнт знаходиться **поблизу меж між класами**.

У клінічній інтерпретації: *наявні симптоми пояснюють кілька діагнозів приблизно однаково добре*. Саме такі ситуації є класичними ситуаціями диференціальної діагностики.

---

## 6. Повна ітеративна схема (зациклення)

### 6.1. Ітерація як базова одиниця

Ітерація — це один повний прохід системи:
1. Отримання нової інформації
2. Оновлення опису пацієнта
3. Перерахунок SOM-контексту
4. Переоцінка гіпотез через Multilabel NN
5. Перевірка критеріїв зупинки

---

### 6.2. Механізм переходу між ітераціями

Якщо після ітерації \\(t\\) система виявляє, що невизначеність залишається суттєвою, вона формує запит на додаткову інформацію. Після отримання нової інформації формується оновлений опис стану пацієнта \\(x^{(t+1)}\\).

---

### 6.3. Повторна проєкція на SOM

На кожній новій ітерації система знову проєктує оновлений стан \\(x^{(t+1)}\\) на SOM. Зміна стану може призвести до:

**Випадок 1: Посилення домінуючого сценарію**
\\[m_{u^{*}}^{(t+1)} > m_{u^{*}}^{(t)}, \quad \text{де } u^{*} = \arg\max_u m_u^{(t)}\\]

**Випадок 2: Перерозподіл між сценаріями**
\\[\exists u_1, u_2: \quad m_{u_1}^{(t+1)} < m_{u_1}^{(t)} \text{ та } m_{u_2}^{(t+1)} > m_{u_2}^{(t)}\\]

**Випадок 3: Зміна активної множини сценаріїв**
\\[\mathcal{U}_{active}^{(t+1)} \neq \mathcal{U}_{active}^{(t)}, \quad \text{де } \mathcal{U}_{active} = \{u : m_u > \tau_m\}\\]

---

### 6.4. Гарантія завершуваності

Завершуваність гарантується тим, що:
* кількість релевантних гіпотез зменшується або стабілізується;
* інформаційний виграш від нових питань з часом падає;
* або система переходить до зовнішніх джерел даних.

---

## 7. Підсумковий сенс Multilabel NN у системі

### 7.1. Multilabel NN як відповідь на фундаментальну проблему медицини

Медицина має фундаментальну властивість: **одні й ті самі симптоми можуть відповідати різним діагнозам**. Multilabel Neural Network — це **єдино адекватна математична форма опису клінічної реальності**, де істина часто не є унікальною на проміжних етапах.

---

### 7.2. Від класифікації до підтримки клінічного мислення

Multilabel NN дозволяє системі **перебувати у стані "відкритих гіпотез"**, не вважаючи це помилкою. Такий стан є нормальним і бажаним на ранніх етапах діагностики.

---

### 7.3. Формалізація діагностичної невизначеності

Multilabel NN **робить невизначеність явною і керованою** через набір значень узгодженості \\(\hat{y}_i\\). Це дозволяє:

* порівнювати гіпотези між собою;
* оцінювати силу конфлікту;
* відстежувати зміну балансу від ітерації до ітерації.

---

### 7.4. Підсумкове формулювання

> **Multilabel NN є центральним механізмом, який перетворює структуровані клінічні дані на ітеративний процес диференціальної діагностики, з явною невизначеністю, конфліктом гіпотез і логічним шляхом до рішення.**

Вона не дає відповідей замість лікаря. Вона:
* формалізує невизначеність;
* структурує гіпотези;
* запускає уточнення;
* забезпечує прозору, науково коректну основу для клінічного рішення.

Саме тому Multilabel NN є не допоміжним компонентом, а **смисловим ядром всієї архітектури**.


---

